name: sync-types
author: "@RedGuy12"
description: GitHub action to sync @types dependencies with the normal dependency version.
runs:
    using: composite
    steps:
        - name: Setup Node.JS
          uses: actions/setup-node@v3.5.1
          with:
              node-version: 16.17.0
              cache: npm

        - name: Remove lockfile
          run: rm package-lock.json

        - name: Sync @types versions
          run: node $GITHUB_ACTION_PATH/script.mjs

        - name: Install
          run: npm run build
          shell: bash
          working-directory: ${{ github.action_path }}

        - name: Commit
          uses: stefanzweifel/git-auto-commit-action@v4.15.4
          with:
              commit_message: Update dependencies
              branch: ${{ github.head_ref }}
